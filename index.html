<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tool D·ª± ƒêo√°n T√†i X·ªâu Hash</title>
  <style id="theme-style">
  </style>
  <style>
    body {
      margin: 0;
      font-family: 'Courier New', Courier, monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      position: relative;
    }
    .container {
      padding: 30px;
      border-radius: 12px;
      width: 95%;
      max-width: 500px;
      box-shadow: 0 0 40px #89b4fa88;
      transition: background 0.3s ease;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .note {
      background: #222;
      color: #ffa;
      padding: 10px;
      margin-bottom: 20px;
      border-left: 4px solid #f00;
      font-size: 14px;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 6px;
    }
    .button-row {
      display: flex;
      justify-content: space-around;
      margin-bottom: 10px;
    }
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.2s;
    }
    .btn:hover { transform: scale(1.05); }
    .btn-black { background: #000; color: #fff; }
    .btn-white { background: #fff; color: #000; }
    .btn-predict {
      background: linear-gradient(135deg, #89b4fa, #74c7ec);
      color: #000;
      width: 100%;
      font-weight: bold;
    }
    .result {
      margin-top: 20px;
      text-align: center;
      font-size: 20px;
    }
    .prev-display {
      margin-top: 5px;
      text-align: center;
      color: #fcd;
      font-size: 14px;
    }
    .note-below {
      margin-top: 10px;
      font-size: 13px;
      text-align: center;
      color: #ffaaaa;
    }
    .copyright {
      position: fixed;
      bottom: 10px;
      right: 15px;
      font-size: 12px;
      color: #aaa;
    }
    .theme-switch {
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .accuracy-bar {
      margin-top: 10px;
      width: 100%;
      height: 12px;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
    }
    .accuracy-fill {
      height: 100%;
      background: linear-gradient(to right, #0f0, #0c0);
      width: 0%;
      transition: width 0.5s ease;
    }
    .accuracy-text {
      text-align: center;
      font-size: 14px;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div class="container" id="main-container">
    <div class="note">‚ö†Ô∏è L∆∞u √Ω: K·∫øt qu·∫£ kh√¥ng th·ªÉ ch√≠nh x√°c 100%, ch·ªâ gi√∫p ng∆∞·ªùi ch∆°i kh√¥ng c·∫ßn suy nghƒ© vi·ªác ch·ªçn c·ª≠a ƒë·∫∑t n√™n v·∫´n c·∫ßn qu·∫£n l√Ω v·ªën th√¥ng minh !!</div>

    <h1>D·ª± ƒêo√°n T√†i X·ªâu MD5</h1>
    <div class="theme-switch">
      <button class="btn" onclick="setTheme('dark')">üåô M·∫∑c ƒë·ªãnh</button>
      <button class="btn" onclick="setTheme('red')">‚ù§Ô∏è ƒê·ªè s·∫´m</button>
      <button class="btn" onclick="setTheme('blue')">üíô Xanh lam</button>
    </div>

    <label>Chu·ªói Hash:</label>
    <input type="text" id="hashInput" placeholder="Nh·∫≠p MD5 / SHA1 / SHA256">

    <label>V√°n tr∆∞·ªõc:</label>
    <div class="button-row">
      <button class="btn btn-black" onclick="setPrevious('T√†i')">‚ö´</button>
      <button class="btn btn-white" onclick="setPrevious('X·ªâu')">‚ö™</button>
    </div>
    <div class="prev-display" id="prevDisplay">K·∫øt qu·∫£ v√°n tr∆∞·ªõc l√†: T√†i</div>

    <button class="btn btn-predict" onclick="predict()">D·ª± ƒëo√°n</button>
    <div class="result" id="result"></div>

    <div class="button-row">
      <button class="btn" style="background: #0f4; color: #000;" onclick="updateAccuracy(true)">D·ª± ƒëo√°n ƒë√∫ng</button>
      <button class="btn" style="background: #f44; color: #fff;" onclick="updateAccuracy(false)">D·ª± ƒëo√°n sai</button>
    </div>

    <div class="accuracy-bar"><div class="accuracy-fill" id="accuracyFill"></div></div>
    <div class="accuracy-text" id="accuracyText">T·ªâ l·ªá ƒë√∫ng: 0%</div>

    <div class="note-below">üí° N·∫øu tool b√°o tr√™n 75% m√† sai th√¨ n√™n ngh·ªâ 3‚Äì5 v√°n ƒë·ªÉ tool b√°o ch√≠nh x√°c h∆°n.</div>
  </div>

  <div class="copyright">¬© Hjeyki</div>

  <script>
    let lastHash = "";
    let lastPrediction = null;
    let lastConfidence = null;
    let prevResult = "T√†i";

    let correct = 0;
    let total = 0;

    function setPrevious(value) {
      prevResult = value;
      document.getElementById("prevDisplay").innerText = "K·∫øt qu·∫£ v√°n tr∆∞·ªõc l√†: " + value;
    }

    function charSum(str) {
      return [...str].reduce((a, c) => a + parseInt(c, 16), 0);
    }

    function sumSpecial(str) {
      let pos = [1, 3, 5, 7, 9];
      return pos.reduce((a, i) => a + parseInt(str[i], 16), 0);
    }

    function analyzeHash(str) {
      str = str.toLowerCase();
      if (![32, 40, 64].includes(str.length)) throw Error("Hash kh√¥ng h·ª£p l·ªá!");

      let total1 = charSum(str) % 2;
      let total2 = sumSpecial(str) % 2;
      let total3 = parseInt(str[0], 16) % 2;

      return [total1 ? "T√†i" : "X·ªâu", total2 ? "T√†i" : "X·ªâu", total3 ? "T√†i" : "X·ªâu"];
    }

    function finalDecision(r1, r2, r3, prev) {
      let results = [r1, r2, r3, prev];
      let t = results.filter(x => x === "T√†i").length;
      let x = results.filter(x => x === "X·ªâu").length;

      if (t === 2 && x === 2) return r3 === "T√†i" ? "X·ªâu" : "T√†i";
      if (t === 1 && x === 3) return r3 === "X·ªâu" ? "T√†i" : "X·ªâu";
      if (t === 3 && x === 1) return r1 === "X·ªâu" ? "T√†i" : "X·ªâu";
      if (t === 4 || x === 4) return r1;
      return "Kh√¥ng x√°c ƒë·ªãnh";
    }

    function predict() {
      const hash = document.getElementById("hashInput").value.trim().toLowerCase();
      const resBox = document.getElementById("result");

      if (![32, 40, 64].includes(hash.length)) return alert("Hash ph·∫£i d√†i 32/40/64 k√Ω t·ª±");

      if (hash === lastHash && lastPrediction) {
        resBox.innerHTML = `D·ª± ƒëo√°n: ${lastPrediction} ${lastPrediction === "T√†i" ? "‚ö´" : "‚ö™"}<br>T·ªâ l·ªá: ${lastConfidence}%`;
        return;
      }

      try {
        const [r1, r2, r3] = analyzeHash(hash);
        const r_tai = finalDecision(r1, r2, r3, "T√†i");
        const r_xiu = finalDecision(r1, r2, r3, "X·ªâu");
        let final, conf;

        if (r_tai === r_xiu) {
          final = r_tai;
          conf = Math.floor(Math.random() * 30) + 70; // 70-99
        } else {
          final = prevResult === "T√†i" ? "X·ªâu" : "T√†i";
          conf = Math.floor(Math.random() * 11) + 50; // 50-60
        }

        lastHash = hash;
        lastPrediction = final;
        lastConfidence = conf;

        resBox.innerHTML = `D·ª± ƒëo√°n: ${final} ${final === "T√†i" ? "‚ö´" : "‚ö™"}<br>T·ªâ l·ªá: ${conf}%`;
      } catch (e) {
        alert(e.message);
      }
    }

    function updateAccuracy(isCorrect) {
      total++;
      if (isCorrect) correct++;

      let percent = total ? Math.round((correct / total) * 100) : 0;
      document.getElementById("accuracyFill").style.width = percent + "%";
      document.getElementById("accuracyText").innerText = `T·ªâ l·ªá ƒë√∫ng: ${percent}%`;
    }

    function setTheme(theme) {
      const style = document.getElementById("theme-style");
      if (theme === "dark") {
        style.innerHTML = `
          body { background: #0f0f0f; color: #fff; }
          .container { background: #1e1e2e; box-shadow: 0 0 50px #89b4fa88; }
        `;
      } else if (theme === "red") {
        style.innerHTML = `
          body { background: radial-gradient(circle at center, #4a0000, #1a0000); color: #fff; }
          .container { background: radial-gradient(circle at center, #5a0033, #8b0000); }
        `;
      } else if (theme === "blue") {
        style.innerHTML = `
          body { background: radial-gradient(circle at center, #002244, #000c1a); color: #fff; }
          .container { background: radial-gradient(circle at center, #003355, #001122); }
        `;
      }
    }

    // Giao di·ªán m·∫∑c ƒë·ªãnh khi m·ªü
    setTheme('dark');
  </script>
</body>
</html>
